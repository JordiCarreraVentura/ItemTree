
#	Overview

This script takes as input a collection of records and sorts them according to a tree-like structure. The tree is generated by recursively splitting the collection into two partitions. The split in each partition is by the highest frequency item across all the members in that partition. All members containing an occurrence of that item are placed into one subclass and all other items are put into the other.

## Example
For illustration, consider the following output:

```pbpaste | awk '{gsub("\\. ", ".\n", $0); print}' | python ItemTree.py --min_size 1 --preproc word_normal
The tree is generated by recursively splitting the collection into two partitions.	./is/by/the
The split in each partition is by the highest frequency item across all the members in that partition.	./is/by/the
This script takes as input a collection of records and sorts them according to a tree-like structure.	./*
```

## Invocation

The script can be invoked with `python ItemTree.py PATH/TO/INPUT/FILE PATH/TO/OUTPUT/FILE`.

The input and output file parameters are optional; if they are not provided, the sccript will read from the standard input (`sys.stdin` in Python). When invoked this way, the script can be used in a BASH pipeline as shown in the example above.

### Optional parameters

| Parameter | Flag | Type | Description |
|---|---|---|---|
|input file | | positional, optional | |
|output file | | positional, optional | |
|maximum freq | `--max_freq` | optional | Maximum frequency of any item to be used as a node in the tree |
|maximum prob | `--max_prob` | optional | Maximum probability of any item to be used as a node in the tree. |
|minimum freq | `--min_freq` | optional | Minimum frequency of any item to be used as a node in the tree. |
|minimum prob |  `--min_prob`| optional | Minimum probability of any item to be used as a node in the tree. |
|preprocessing method | `--preproc` | optional | Data preprocessing: `word_normal, whitespace, non_alpha, non_alnum` |
|minimum cluster size | | | Minimum size for a tree branch to be returned. |
|covert trees from feature tuples to text | `--itemtext` | optional | Return tree items as text instead of text/None tuples. |
|leave output in the same order as in the input | | optional | Disable automatic sorting by item tree. |
|output format | `--output` | optional | Output format: `'xy'` = input strings + item trees; `'yx'` = item trees + input strings; `'x'` = input strings; `'y'` = item trees`|




### Advanced usage

If the **ItemTree.py** class is used as a module and imported into another class, an object of this class can be called on the input stream and, after that, iterated over in order to retrieve the sorted records. Given the whole dataset of input records X and a correlative list Y where the i-th element is the tree corresponding to the i-th element in X as generated by this script, then the default output format returns O, such that O = [ (x_i, y_i), (x_(i + 1), y_(i + 1)), ..., (x_(|X|), y_(|X|)) ].

Note that the order of the elements in the input is not necessarily kept in the output. More formally, while it holds that, for the i-th element in O, the y-element in that element is the tree corresponding to the x-element in that pair, it does not follow that that particular x, O's i-th item, is also X's i-th element. The opposite will normally true unless the flag `--nosort` is used when invoking the script.


## Technical details

Deterministic
Speed


## Dependencies
argparse
csv
re
sys
tqdm

